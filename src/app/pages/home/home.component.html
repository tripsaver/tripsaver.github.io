<!-- HEADER -->
<header class="main-header">
  <div class="header-container">
    <!-- <div class="logo">TripSaver</div> -->
     <div class="header-brand">
    <img src="assets/logo.png" alt="TripSaver Logo" class="logo-image" [routerLink]="'/'">
    <span class="logo-text" [routerLink]="'/'">TripSaver</span>
  </div>

    <button class="hamburger-btn" (click)="toggleMenu()" [class.active]="isMenuOpen">
      <span></span><span></span><span></span>
    </button>

    <nav [class.mobile-open]="isMenuOpen">
      <a routerLink="/" routerLinkActive="active" (click)="closeMenu()">Home</a>
      <a routerLink="/hotels" routerLinkActive="active" (click)="closeMenu()">Hotels</a>
      <a routerLink="/deals" routerLinkActive="active" (click)="closeMenu()">Deals</a>
      <a routerLink="/how-it-works" routerLinkActive="active" (click)="closeMenu()">How It Works</a>
      <a routerLink="/methodology" routerLinkActive="active" (click)="closeMenu()">Methodology</a>
      <a routerLink="/contact" routerLinkActive="active" (click)="closeMenu()">Contact</a>
      <a routerLink="/about" routerLinkActive="active" (click)="closeMenu()">About</a>
    </nav>
  </div>
</header>

<!-- TRIP PLANNER SECTION (Explorer Users - First Path) -->
<section class="finder-section">
  <div class="finder-container">
    <div class="finder-intro">
      <h2>ğŸ§­ Smart Trip Planner</h2>
      <p class="finder-subtext">Want personalized recommendations? Answer 4 quick questions and get destinations ranked just for you.</p>
    </div>

    <!-- Trip Stepper Component -->
    <app-trip-stepper></app-trip-stepper>
  </div>
</section>

<!-- HERO SECTION (Intent Users) -->
<section class="hero-section">
  <div class="hero-content">
    <h1 class="hero-title">Book Hotels, Bus & Travel Essentials</h1>
    <p class="hero-subtitle">{{ heroSubtitle }}</p>
    
    <!-- Key Benefits -->
    <div class="hero-benefits">
      <div class="benefit">
        <span class="benefit-icon">âœ“</span>
        <span class="benefit-text">Best Prices Guaranteed</span>
      </div>
      <div class="benefit">
        <span class="benefit-icon">âœ“</span>
        <span class="benefit-text">Instant Booking</span>
      </div>
      <div class="benefit">
        <span class="benefit-icon">âœ“</span>
        <span class="benefit-text">No Hidden Charges</span>
      </div>
    </div>
  </div>

  <!-- Background gradient -->
  <div class="hero-bg"></div>
</section>



<!-- DIVIDER: Explorer vs Intent Users -->
<section class="dual-entry-divider">
  <div class="divider-line"></div>
  <div class="divider-text">
    <span class="divider-label">OR</span>
    <span class="divider-description">Book instantly without planning</span>
  </div>
  <div class="divider-line"></div>
</section>

<!-- BOOK INSTANTLY ACTIONS (Second Path - High Conversion) -->
<section class="book-instantly-section">
  <div class="book-instantly-container">
    <div class="instant-header">
      <h3>âš¡ Book Instantly</h3>
      <p>No planning required â€¢ No extra cost</p>
    </div>

    <div class="instant-actions">
      <!-- Hotels Button -->
      <button 
        class="instant-action-btn hotels"
        (click)="openHotelBooking()"
        title="Open hotel booking">
        <span class="icon">ğŸ¨</span>
        <span class="name">Hotels</span>
        <span class="arrow">â†’</span>
      </button>

      <!-- Bus Tickets Button -->
      <button 
        class="instant-action-btn bus"
        (click)="openBusBooking()"
        title="Book bus tickets">
        <span class="icon">ğŸšŒ</span>
        <span class="name">Bus Tickets</span>
        <span class="arrow">â†’</span>
      </button>

      <!-- Travel Essentials Button -->
      <button 
        class="instant-action-btn essentials"
        (click)="openEssentialsShopping()"
        title="Shop travel essentials">
        <span class="icon">ğŸ§³</span>
        <span class="name">Essentials</span>
        <span class="arrow">â†’</span>
      </button>
    </div>

    <p class="instant-note">We may earn a small commission at no extra cost to you.</p>
  </div>
</section>

<!-- TRIP PLANNER CARD SECTION -->
<section class="trip-planner-card-section">
  <div class="card-container">
    <app-plan-my-trip-card></app-plan-my-trip-card>
  </div>
</section>

<!-- HOTEL BOOKING MODAL (Home Page) -->
<div class="booking-modal-overlay" *ngIf="isHotelModalOpen" (click)="closeHotelModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="modal-close" (click)="closeHotelModal()">âœ•</button>
    
    <div class="modal-header">
      <h3>ğŸ¨ Book Hotels</h3>
      <p class="modal-subtext">Find & book hotels on your favorite destination</p>
    </div>

    <div class="modal-body">
      <!-- Hotel booking platforms -->
      <div class="platforms-container">
        <a [href]="'https://www.agoda.com/?cid=' + agodaAffiliateId" target="_blank" rel="noopener" class="platform-card" (click)="trackHotelClick('Agoda')">
          <div class="platform-icon">ğŸ¨</div>
          <div class="platform-info">
            <h4>Agoda</h4>
            <p>Exclusive deals & rewards</p>
          </div>
          <span class="platform-badge">Best Deals</span>
        </a>
      </div>
    </div>

    <div class="affiliate-disclosure">
      ğŸ’¡ We may earn a small commission. No extra cost to you.
    </div>
  </div>
</div>

<!-- BUS BOOKING MODAL (Home Page) -->
<div class="confirmation-modal" *ngIf="isBusModalOpen" (click)="closeBusModal()">
  <div class="modal-box" (click)="$event.stopPropagation()">
    <button class="modal-close" (click)="closeBusModal()">âœ•</button>

    <div class="confirmation-icon">ğŸšŒ</div>
    <h3>Book Bus Tickets</h3>
    <p class="confirmation-text">
      You'll be redirected to AbhiBus to book your bus tickets
    </p>

    <div class="affiliate-disclosure">
      We work with AbhiBus to bring you the best deals. No extra cost to you.
    </div>

    <div class="confirmation-actions">
      <button class="btn-cancel" (click)="closeBusModal()">Cancel</button>
      <button class="btn-confirm" (click)="confirmBusBooking()">
        Continue to AbhiBus â†’
      </button>
    </div>
  </div>
</div>

<!-- ESSENTIALS MODAL (Home Page) -->
<div class="essentials-modal" *ngIf="isEssentialsModalOpen" (click)="closeEssentialsModal()">
  <div class="modal-box" (click)="$event.stopPropagation()">
    <button class="modal-close" (click)="closeEssentialsModal()">âœ•</button>

    <div class="modal-header">
      <h3>ğŸ§³ Travel Essentials</h3>
      <p class="modal-subtext">Shop essentials on Amazon</p>
    </div>

    <div class="essentials-grid">
      <button 
        class="essentials-btn"
        (click)="goToEssentials('luggage')"
        title="Luggage & Backpacks">
        <span class="emoji">ğŸ’</span>
        <span class="name">Luggage</span>
      </button>

      <button 
        class="essentials-btn"
        (click)="goToEssentials('toiletries')"
        title="Travel Toiletries">
        <span class="emoji">ğŸ§´</span>
        <span class="name">Toiletries</span>
      </button>

      <button 
        class="essentials-btn"
        (click)="goToEssentials('electronics')"
        title="Travel Electronics">
        <span class="emoji">âš¡</span>
        <span class="name">Electronics</span>
      </button>

      <button 
        class="essentials-btn"
        (click)="goToEssentials('clothing')"
        title="Travel Clothing">
        <span class="emoji">ğŸ‘•</span>
        <span class="name">Clothing</span>
      </button>
    </div>

    <div class="affiliate-disclosure">
      Shop on Amazon with our affiliate link. Same prices, we earn a commission.
    </div>
  </div>
</div>

<!-- Legacy Smart Recommendations (for backward compatibility) -->
<div class="smart-recommendations-section" *ngIf="showSmartRecommendations">
  <app-smart-recommendations
    [userPreferences]="userPreferences"
    [showForm]="true">
  </app-smart-recommendations>
</div>
