<div *ngIf="showSection" class="agoda-hotels-section">
  <div class="section-header">
    <h2>Featured Hotels on Agoda</h2>
    <p>Handpicked deals with excellent ratings</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Loading hotels...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-state">
    <p>{{ error }}</p>
    <button (click)="loadFeaturedHotels()" class="btn btn-primary">Retry</button>
  </div>

  <!-- Hotels Grid -->
  <div *ngIf="!loading && !error && featuredHotels.length > 0" class="hotels-grid">
    <article *ngFor="let hotel of featuredHotels; let i = index" class="hotel-card card">
      <div class="hotel-image">
        <img [src]="hotel.image || ('https://picsum.photos/seed/'+hotel.hotelId+'/400/300')" 
             [alt]="hotel.hotelName" 
             loading="lazy">
        
        <div *ngIf="hotel.discount > 0" class="discount-badge">
          -{{ hotel.discount | number:'1.0-0' }}%
        </div>

        <div class="rating-badge">
          <span class="stars">
            <span *ngFor="let star of getStarArray(hotel.rating)" class="star">‚òÖ</span>
          </span>
          <span class="rating-value">{{ hotel.rating | number:'1.1-1' }}</span>
        </div>
      </div>

      <div class="hotel-body">
        <h3 class="hotel-name">{{ hotel.hotelName }}</h3>
        <p class="hotel-location">üìç {{ hotel.city }}, {{ hotel.country }}</p>
        <p class="hotel-reviews" *ngIf="hotel.reviewCount > 0">({{ hotel.reviewCount | number }} reviews)</p>

        <div class="amenities" *ngIf="hotel.amenities && hotel.amenities.length > 0">
          <span *ngFor="let amenity of hotel.amenities.slice(0, 3)" class="tag">{{ amenity }}</span>
        </div>

        <div class="price-info">
          <div class="current-price">
            <span class="currency">{{ hotel.currency }}</span>
            <span class="price">{{ hotel.pricePerNight | number:'1.0-0' }}</span>/night
          </div>
        </div>

        <a [href]="hotel.affiliateUrl" target="_blank" rel="noopener noreferrer" 
           class="btn btn-accent full-width"
           (click)="trackHotelClick(hotel)">
          Book on Agoda ‚Üí
        </a>
      </div>
    </article>
  </div>

  <!-- Empty -->
  <div *ngIf="!loading && !error && featuredHotels.length === 0" class="empty-state">
    <p>No hotels found</p>
  </div>
</div>
